var that;

function MyFavoriteMovies() {
	EventEmitter.call(this);
	
	that = this;
	
	db.on('ready', that.init);
	
	// process.stdin.on('data', function (text) {
	// 	text = text.replace(/^\s*/, '').replace(/\s*$/, '');
		
	// 	that.write('');
		
	// 	switch (text) {
	// 		case 'help':
	// 			that.write('help\topens this menu');
	// 			that.write('');
	// 			break;
	// 		case 'quit':
	// 			that.quit();
	// 			break;
	// 	}
	// });
}

util.inherits(MyFavoriteMovies, EventEmitter);

MyFavoriteMovies.prototype.usage = 'usage: index.js <command> [parameters]';
MyFavoriteMovies.prototype.moreInformation = 'Type "index.js help" for more information.';

MyFavoriteMovies.prototype.write = function (msg) {
	process.stdout.write(msg + '\n');
}

MyFavoriteMovies.prototype.init = function () {
	if (typeof(process.argv[2]) !== 'undefined') {
		switch(process.argv[2]) {
			case 'help':
				that.write(that.usage);
				that.write('');
				that.write('help\tshows this list');
				break;
			default:
				that.write(process.argv[2] + ' is not a supported action.');
				that.write(that.moreInformation);
				that.write(that.usage);
				break;
		}
	} else {
		that.write('Action must be specified.');
		that.write(that.moreInformation);
	}
	
	that.exit();
	
	// process.stdin.resume();
	// process.stdin.setEncoding('utf8');
	// that.write('Waiting for instructions. Type "help" for more informtion.\n');
}

MyFavoriteMovies.prototype.exit = function (code) {
	if (typeof(code) == 'undefined') {
		code = 0;
	}
	
	process.exit(code);
}

module.exports = MyFavoriteMovies;